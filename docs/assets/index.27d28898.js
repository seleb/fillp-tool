var pr=Object.defineProperty;var gr=(l,f,a)=>f in l?pr(l,f,{enumerable:!0,configurable:!0,writable:!0,value:a}):l[f]=a;var fe=(l,f,a)=>(gr(l,typeof f!="symbol"?f+"":f,a),a);import{h as A,l as z,p as dt,d as vt,P as yr}from"./index.99e595fb.js";var le=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{};function he(l){throw new Error('Could not dynamically require "'+l+'". Please configure the dynamicRequireTargets or/and ignoreDynamicRequires option of @rollup/plugin-commonjs appropriately for this require call to work.')}var mt={exports:{}};/*!
    localForage -- Offline Storage, Improved
    Version 1.10.0
    https://localforage.github.io/localForage
    (c) 2013-2017 Mozilla, Apache License 2.0
*/(function(l,f){(function(a){l.exports=a()})(function(){return function a(u,g,_){function E(I,D){if(!g[I]){if(!u[I]){var m=typeof he=="function"&&he;if(!D&&m)return m(I,!0);if(w)return w(I,!0);var b=new Error("Cannot find module '"+I+"'");throw b.code="MODULE_NOT_FOUND",b}var R=g[I]={exports:{}};u[I][0].call(R.exports,function(L){var $=u[I][1][L];return E($||L)},R,R.exports,a,u,g,_)}return g[I].exports}for(var w=typeof he=="function"&&he,N=0;N<_.length;N++)E(_[N]);return E}({1:[function(a,u,g){(function(_){var E=_.MutationObserver||_.WebKitMutationObserver,w;if(E){var N=0,I=new E(L),D=_.document.createTextNode("");I.observe(D,{characterData:!0}),w=function(){D.data=N=++N%2}}else if(!_.setImmediate&&typeof _.MessageChannel<"u"){var m=new _.MessageChannel;m.port1.onmessage=L,w=function(){m.port2.postMessage(0)}}else"document"in _&&"onreadystatechange"in _.document.createElement("script")?w=function(){var P=_.document.createElement("script");P.onreadystatechange=function(){L(),P.onreadystatechange=null,P.parentNode.removeChild(P),P=null},_.document.documentElement.appendChild(P)}:w=function(){setTimeout(L,0)};var b,R=[];function L(){b=!0;for(var P,K,H=R.length;H;){for(K=R,R=[],P=-1;++P<H;)K[P]();H=R.length}b=!1}u.exports=$;function $(P){R.push(P)===1&&!b&&w()}}).call(this,typeof le<"u"?le:typeof self<"u"?self:typeof window<"u"?window:{})},{}],2:[function(a,u,g){var _=a(1);function E(){}var w={},N=["REJECTED"],I=["FULFILLED"],D=["PENDING"];u.exports=m;function m(p){if(typeof p!="function")throw new TypeError("resolver must be a function");this.state=D,this.queue=[],this.outcome=void 0,p!==E&&$(this,p)}m.prototype.catch=function(p){return this.then(null,p)},m.prototype.then=function(p,C){if(typeof p!="function"&&this.state===I||typeof C!="function"&&this.state===N)return this;var x=new this.constructor(E);if(this.state!==D){var O=this.state===I?p:C;R(x,O,this.outcome)}else this.queue.push(new b(x,p,C));return x};function b(p,C,x){this.promise=p,typeof C=="function"&&(this.onFulfilled=C,this.callFulfilled=this.otherCallFulfilled),typeof x=="function"&&(this.onRejected=x,this.callRejected=this.otherCallRejected)}b.prototype.callFulfilled=function(p){w.resolve(this.promise,p)},b.prototype.otherCallFulfilled=function(p){R(this.promise,this.onFulfilled,p)},b.prototype.callRejected=function(p){w.reject(this.promise,p)},b.prototype.otherCallRejected=function(p){R(this.promise,this.onRejected,p)};function R(p,C,x){_(function(){var O;try{O=C(x)}catch(k){return w.reject(p,k)}O===p?w.reject(p,new TypeError("Cannot resolve promise with itself")):w.resolve(p,O)})}w.resolve=function(p,C){var x=P(L,C);if(x.status==="error")return w.reject(p,x.value);var O=x.value;if(O)$(p,O);else{p.state=I,p.outcome=C;for(var k=-1,Y=p.queue.length;++k<Y;)p.queue[k].callFulfilled(C)}return p},w.reject=function(p,C){p.state=N,p.outcome=C;for(var x=-1,O=p.queue.length;++x<O;)p.queue[x].callRejected(C);return p};function L(p){var C=p&&p.then;if(p&&(typeof p=="object"||typeof p=="function")&&typeof C=="function")return function(){C.apply(p,arguments)}}function $(p,C){var x=!1;function O(V){x||(x=!0,w.reject(p,V))}function k(V){x||(x=!0,w.resolve(p,V))}function Y(){C(k,O)}var W=P(Y);W.status==="error"&&O(W.value)}function P(p,C){var x={};try{x.value=p(C),x.status="success"}catch(O){x.status="error",x.value=O}return x}m.resolve=K;function K(p){return p instanceof this?p:w.resolve(new this(E),p)}m.reject=H;function H(p){var C=new this(E);return w.reject(C,p)}m.all=ye;function ye(p){var C=this;if(Object.prototype.toString.call(p)!=="[object Array]")return this.reject(new TypeError("must be an array"));var x=p.length,O=!1;if(!x)return this.resolve([]);for(var k=new Array(x),Y=0,W=-1,V=new this(E);++W<x;)Q(p[W],W);return V;function Q(ne,se){C.resolve(ne).then(be,function(te){O||(O=!0,w.reject(V,te))});function be(te){k[se]=te,++Y===x&&!O&&(O=!0,w.resolve(V,k))}}}m.race=Z;function Z(p){var C=this;if(Object.prototype.toString.call(p)!=="[object Array]")return this.reject(new TypeError("must be an array"));var x=p.length,O=!1;if(!x)return this.resolve([]);for(var k=-1,Y=new this(E);++k<x;)W(p[k]);return Y;function W(V){C.resolve(V).then(function(Q){O||(O=!0,w.resolve(Y,Q))},function(Q){O||(O=!0,w.reject(Y,Q))})}}},{1:1}],3:[function(a,u,g){(function(_){typeof _.Promise!="function"&&(_.Promise=a(2))}).call(this,typeof le<"u"?le:typeof self<"u"?self:typeof window<"u"?window:{})},{2:2}],4:[function(a,u,g){var _=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(e){return typeof e}:function(e){return e&&typeof Symbol=="function"&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e};function E(e,r){if(!(e instanceof r))throw new TypeError("Cannot call a class as a function")}function w(){try{if(typeof indexedDB<"u")return indexedDB;if(typeof webkitIndexedDB<"u")return webkitIndexedDB;if(typeof mozIndexedDB<"u")return mozIndexedDB;if(typeof OIndexedDB<"u")return OIndexedDB;if(typeof msIndexedDB<"u")return msIndexedDB}catch{return}}var N=w();function I(){try{if(!N||!N.open)return!1;var e=typeof openDatabase<"u"&&/(Safari|iPhone|iPad|iPod)/.test(navigator.userAgent)&&!/Chrome/.test(navigator.userAgent)&&!/BlackBerry/.test(navigator.platform),r=typeof fetch=="function"&&fetch.toString().indexOf("[native code")!==-1;return(!e||r)&&typeof indexedDB<"u"&&typeof IDBKeyRange<"u"}catch{return!1}}function D(e,r){e=e||[],r=r||{};try{return new Blob(e,r)}catch(n){if(n.name!=="TypeError")throw n;for(var t=typeof BlobBuilder<"u"?BlobBuilder:typeof MSBlobBuilder<"u"?MSBlobBuilder:typeof MozBlobBuilder<"u"?MozBlobBuilder:WebKitBlobBuilder,i=new t,o=0;o<e.length;o+=1)i.append(e[o]);return i.getBlob(r.type)}}typeof Promise>"u"&&a(3);var m=Promise;function b(e,r){r&&e.then(function(t){r(null,t)},function(t){r(t)})}function R(e,r,t){typeof r=="function"&&e.then(r),typeof t=="function"&&e.catch(t)}function L(e){return typeof e!="string"&&(console.warn(e+" used as a key, but it is not a string."),e=String(e)),e}function $(){if(arguments.length&&typeof arguments[arguments.length-1]=="function")return arguments[arguments.length-1]}var P="local-forage-detect-blob-support",K=void 0,H={},ye=Object.prototype.toString,Z="readonly",p="readwrite";function C(e){for(var r=e.length,t=new ArrayBuffer(r),i=new Uint8Array(t),o=0;o<r;o++)i[o]=e.charCodeAt(o);return t}function x(e){return new m(function(r){var t=e.transaction(P,p),i=D([""]);t.objectStore(P).put(i,"key"),t.onabort=function(o){o.preventDefault(),o.stopPropagation(),r(!1)},t.oncomplete=function(){var o=navigator.userAgent.match(/Chrome\/(\d+)/),n=navigator.userAgent.match(/Edge\//);r(n||!o||parseInt(o[1],10)>=43)}}).catch(function(){return!1})}function O(e){return typeof K=="boolean"?m.resolve(K):x(e).then(function(r){return K=r,K})}function k(e){var r=H[e.name],t={};t.promise=new m(function(i,o){t.resolve=i,t.reject=o}),r.deferredOperations.push(t),r.dbReady?r.dbReady=r.dbReady.then(function(){return t.promise}):r.dbReady=t.promise}function Y(e){var r=H[e.name],t=r.deferredOperations.pop();if(t)return t.resolve(),t.promise}function W(e,r){var t=H[e.name],i=t.deferredOperations.pop();if(i)return i.reject(r),i.promise}function V(e,r){return new m(function(t,i){if(H[e.name]=H[e.name]||Fe(),e.db)if(r)k(e),e.db.close();else return t(e.db);var o=[e.name];r&&o.push(e.version);var n=N.open.apply(N,o);r&&(n.onupgradeneeded=function(s){var c=n.result;try{c.createObjectStore(e.storeName),s.oldVersion<=1&&c.createObjectStore(P)}catch(h){if(h.name==="ConstraintError")console.warn('The database "'+e.name+'" has been upgraded from version '+s.oldVersion+" to version "+s.newVersion+', but the storage "'+e.storeName+'" already exists.');else throw h}}),n.onerror=function(s){s.preventDefault(),i(n.error)},n.onsuccess=function(){var s=n.result;s.onversionchange=function(c){c.target.close()},t(s),Y(e)}})}function Q(e){return V(e,!1)}function ne(e){return V(e,!0)}function se(e,r){if(!e.db)return!0;var t=!e.db.objectStoreNames.contains(e.storeName),i=e.version<e.db.version,o=e.version>e.db.version;if(i&&(e.version!==r&&console.warn('The database "'+e.name+`" can't be downgraded from version `+e.db.version+" to version "+e.version+"."),e.version=e.db.version),o||t){if(t){var n=e.db.version+1;n>e.version&&(e.version=n)}return!0}return!1}function be(e){return new m(function(r,t){var i=new FileReader;i.onerror=t,i.onloadend=function(o){var n=btoa(o.target.result||"");r({__local_forage_encoded_blob:!0,data:n,type:e.type})},i.readAsBinaryString(e)})}function te(e){var r=C(atob(e.data));return D([r],{type:e.type})}function Me(e){return e&&e.__local_forage_encoded_blob}function gt(e){var r=this,t=r._initReady().then(function(){var i=H[r._dbInfo.name];if(i&&i.dbReady)return i.dbReady});return R(t,e,e),t}function yt(e){k(e);for(var r=H[e.name],t=r.forages,i=0;i<t.length;i++){var o=t[i];o._dbInfo.db&&(o._dbInfo.db.close(),o._dbInfo.db=null)}return e.db=null,Q(e).then(function(n){return e.db=n,se(e)?ne(e):n}).then(function(n){e.db=r.db=n;for(var s=0;s<t.length;s++)t[s]._dbInfo.db=n}).catch(function(n){throw W(e,n),n})}function X(e,r,t,i){i===void 0&&(i=1);try{var o=e.db.transaction(e.storeName,r);t(null,o)}catch(n){if(i>0&&(!e.db||n.name==="InvalidStateError"||n.name==="NotFoundError"))return m.resolve().then(function(){if(!e.db||n.name==="NotFoundError"&&!e.db.objectStoreNames.contains(e.storeName)&&e.version<=e.db.version)return e.db&&(e.version=e.db.version+1),ne(e)}).then(function(){return yt(e).then(function(){X(e,r,t,i-1)})}).catch(t);t(n)}}function Fe(){return{forages:[],db:null,dbReady:null,deferredOperations:[]}}function bt(e){var r=this,t={db:null};if(e)for(var i in e)t[i]=e[i];var o=H[t.name];o||(o=Fe(),H[t.name]=o),o.forages.push(r),r._initReady||(r._initReady=r.ready,r.ready=gt);var n=[];function s(){return m.resolve()}for(var c=0;c<o.forages.length;c++){var h=o.forages[c];h!==r&&n.push(h._initReady().catch(s))}var d=o.forages.slice(0);return m.all(n).then(function(){return t.db=o.db,Q(t)}).then(function(v){return t.db=v,se(t,r._defaultConfig.version)?ne(t):v}).then(function(v){t.db=o.db=v,r._dbInfo=t;for(var y=0;y<d.length;y++){var S=d[y];S!==r&&(S._dbInfo.db=t.db,S._dbInfo.version=t.version)}})}function wt(e,r){var t=this;e=L(e);var i=new m(function(o,n){t.ready().then(function(){X(t._dbInfo,Z,function(s,c){if(s)return n(s);try{var h=c.objectStore(t._dbInfo.storeName),d=h.get(e);d.onsuccess=function(){var v=d.result;v===void 0&&(v=null),Me(v)&&(v=te(v)),o(v)},d.onerror=function(){n(d.error)}}catch(v){n(v)}})}).catch(n)});return b(i,r),i}function Et(e,r){var t=this,i=new m(function(o,n){t.ready().then(function(){X(t._dbInfo,Z,function(s,c){if(s)return n(s);try{var h=c.objectStore(t._dbInfo.storeName),d=h.openCursor(),v=1;d.onsuccess=function(){var y=d.result;if(y){var S=y.value;Me(S)&&(S=te(S));var T=e(S,y.key,v++);T!==void 0?o(T):y.continue()}else o()},d.onerror=function(){n(d.error)}}catch(y){n(y)}})}).catch(n)});return b(i,r),i}function St(e,r,t){var i=this;e=L(e);var o=new m(function(n,s){var c;i.ready().then(function(){return c=i._dbInfo,ye.call(r)==="[object Blob]"?O(c.db).then(function(h){return h?r:be(r)}):r}).then(function(h){X(i._dbInfo,p,function(d,v){if(d)return s(d);try{var y=v.objectStore(i._dbInfo.storeName);h===null&&(h=void 0);var S=y.put(h,e);v.oncomplete=function(){h===void 0&&(h=null),n(h)},v.onabort=v.onerror=function(){var T=S.error?S.error:S.transaction.error;s(T)}}catch(T){s(T)}})}).catch(s)});return b(o,t),o}function It(e,r){var t=this;e=L(e);var i=new m(function(o,n){t.ready().then(function(){X(t._dbInfo,p,function(s,c){if(s)return n(s);try{var h=c.objectStore(t._dbInfo.storeName),d=h.delete(e);c.oncomplete=function(){o()},c.onerror=function(){n(d.error)},c.onabort=function(){var v=d.error?d.error:d.transaction.error;n(v)}}catch(v){n(v)}})}).catch(n)});return b(i,r),i}function xt(e){var r=this,t=new m(function(i,o){r.ready().then(function(){X(r._dbInfo,p,function(n,s){if(n)return o(n);try{var c=s.objectStore(r._dbInfo.storeName),h=c.clear();s.oncomplete=function(){i()},s.onabort=s.onerror=function(){var d=h.error?h.error:h.transaction.error;o(d)}}catch(d){o(d)}})}).catch(o)});return b(t,e),t}function Rt(e){var r=this,t=new m(function(i,o){r.ready().then(function(){X(r._dbInfo,Z,function(n,s){if(n)return o(n);try{var c=s.objectStore(r._dbInfo.storeName),h=c.count();h.onsuccess=function(){i(h.result)},h.onerror=function(){o(h.error)}}catch(d){o(d)}})}).catch(o)});return b(t,e),t}function At(e,r){var t=this,i=new m(function(o,n){if(e<0){o(null);return}t.ready().then(function(){X(t._dbInfo,Z,function(s,c){if(s)return n(s);try{var h=c.objectStore(t._dbInfo.storeName),d=!1,v=h.openKeyCursor();v.onsuccess=function(){var y=v.result;if(!y){o(null);return}e===0||d?o(y.key):(d=!0,y.advance(e))},v.onerror=function(){n(v.error)}}catch(y){n(y)}})}).catch(n)});return b(i,r),i}function Dt(e){var r=this,t=new m(function(i,o){r.ready().then(function(){X(r._dbInfo,Z,function(n,s){if(n)return o(n);try{var c=s.objectStore(r._dbInfo.storeName),h=c.openKeyCursor(),d=[];h.onsuccess=function(){var v=h.result;if(!v){i(d);return}d.push(v.key),v.continue()},h.onerror=function(){o(h.error)}}catch(v){o(v)}})}).catch(o)});return b(t,e),t}function Ct(e,r){r=$.apply(this,arguments);var t=this.config();e=typeof e!="function"&&e||{},e.name||(e.name=e.name||t.name,e.storeName=e.storeName||t.storeName);var i=this,o;if(!e.name)o=m.reject("Invalid arguments");else{var n=e.name===t.name&&i._dbInfo.db,s=n?m.resolve(i._dbInfo.db):Q(e).then(function(c){var h=H[e.name],d=h.forages;h.db=c;for(var v=0;v<d.length;v++)d[v]._dbInfo.db=c;return c});e.storeName?o=s.then(function(c){if(!!c.objectStoreNames.contains(e.storeName)){var h=c.version+1;k(e);var d=H[e.name],v=d.forages;c.close();for(var y=0;y<v.length;y++){var S=v[y];S._dbInfo.db=null,S._dbInfo.version=h}var T=new m(function(B,F){var M=N.open(e.name,h);M.onerror=function(G){var oe=M.result;oe.close(),F(G)},M.onupgradeneeded=function(){var G=M.result;G.deleteObjectStore(e.storeName)},M.onsuccess=function(){var G=M.result;G.close(),B(G)}});return T.then(function(B){d.db=B;for(var F=0;F<v.length;F++){var M=v[F];M._dbInfo.db=B,Y(M._dbInfo)}}).catch(function(B){throw(W(e,B)||m.resolve()).catch(function(){}),B})}}):o=s.then(function(c){k(e);var h=H[e.name],d=h.forages;c.close();for(var v=0;v<d.length;v++){var y=d[v];y._dbInfo.db=null}var S=new m(function(T,B){var F=N.deleteDatabase(e.name);F.onerror=function(){var M=F.result;M&&M.close(),B(F.error)},F.onblocked=function(){console.warn('dropInstance blocked for database "'+e.name+'" until all open connections are closed')},F.onsuccess=function(){var M=F.result;M&&M.close(),T(M)}});return S.then(function(T){h.db=T;for(var B=0;B<d.length;B++){var F=d[B];Y(F._dbInfo)}}).catch(function(T){throw(W(e,T)||m.resolve()).catch(function(){}),T})})}return b(o,r),o}var Tt={_driver:"asyncStorage",_initStorage:bt,_support:I(),iterate:Et,getItem:wt,setItem:St,removeItem:It,clear:xt,length:Rt,key:At,keys:Dt,dropInstance:Ct};function Nt(){return typeof openDatabase=="function"}var q="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/",Bt="~~local_forage_type~",ze=/^~~local_forage_type~([^~]+)~/,ue="__lfsc__:",we=ue.length,Ee="arbf",Se="blob",He="si08",ke="ui08",Ue="uic8",$e="si16",Ye="si32",We="ur16",Ve="ui32",Ge="fl32",je="fl64",Ke=we+Ee.length,Qe=Object.prototype.toString;function Xe(e){var r=e.length*.75,t=e.length,i,o=0,n,s,c,h;e[e.length-1]==="="&&(r--,e[e.length-2]==="="&&r--);var d=new ArrayBuffer(r),v=new Uint8Array(d);for(i=0;i<t;i+=4)n=q.indexOf(e[i]),s=q.indexOf(e[i+1]),c=q.indexOf(e[i+2]),h=q.indexOf(e[i+3]),v[o++]=n<<2|s>>4,v[o++]=(s&15)<<4|c>>2,v[o++]=(c&3)<<6|h&63;return d}function Ie(e){var r=new Uint8Array(e),t="",i;for(i=0;i<r.length;i+=3)t+=q[r[i]>>2],t+=q[(r[i]&3)<<4|r[i+1]>>4],t+=q[(r[i+1]&15)<<2|r[i+2]>>6],t+=q[r[i+2]&63];return r.length%3===2?t=t.substring(0,t.length-1)+"=":r.length%3===1&&(t=t.substring(0,t.length-2)+"=="),t}function Lt(e,r){var t="";if(e&&(t=Qe.call(e)),e&&(t==="[object ArrayBuffer]"||e.buffer&&Qe.call(e.buffer)==="[object ArrayBuffer]")){var i,o=ue;e instanceof ArrayBuffer?(i=e,o+=Ee):(i=e.buffer,t==="[object Int8Array]"?o+=He:t==="[object Uint8Array]"?o+=ke:t==="[object Uint8ClampedArray]"?o+=Ue:t==="[object Int16Array]"?o+=$e:t==="[object Uint16Array]"?o+=We:t==="[object Int32Array]"?o+=Ye:t==="[object Uint32Array]"?o+=Ve:t==="[object Float32Array]"?o+=Ge:t==="[object Float64Array]"?o+=je:r(new Error("Failed to get type for BinaryArray"))),r(o+Ie(i))}else if(t==="[object Blob]"){var n=new FileReader;n.onload=function(){var s=Bt+e.type+"~"+Ie(this.result);r(ue+Se+s)},n.readAsArrayBuffer(e)}else try{r(JSON.stringify(e))}catch(s){console.error("Couldn't convert value into a JSON string: ",e),r(null,s)}}function Ot(e){if(e.substring(0,we)!==ue)return JSON.parse(e);var r=e.substring(Ke),t=e.substring(we,Ke),i;if(t===Se&&ze.test(r)){var o=r.match(ze);i=o[1],r=r.substring(o[0].length)}var n=Xe(r);switch(t){case Ee:return n;case Se:return D([n],{type:i});case He:return new Int8Array(n);case ke:return new Uint8Array(n);case Ue:return new Uint8ClampedArray(n);case $e:return new Int16Array(n);case We:return new Uint16Array(n);case Ye:return new Int32Array(n);case Ve:return new Uint32Array(n);case Ge:return new Float32Array(n);case je:return new Float64Array(n);default:throw new Error("Unkown type: "+t)}}var xe={serialize:Lt,deserialize:Ot,stringToBuffer:Xe,bufferToString:Ie};function qe(e,r,t,i){e.executeSql("CREATE TABLE IF NOT EXISTS "+r.storeName+" (id INTEGER PRIMARY KEY, key unique, value)",[],t,i)}function Pt(e){var r=this,t={db:null};if(e)for(var i in e)t[i]=typeof e[i]!="string"?e[i].toString():e[i];var o=new m(function(n,s){try{t.db=openDatabase(t.name,String(t.version),t.description,t.size)}catch(c){return s(c)}t.db.transaction(function(c){qe(c,t,function(){r._dbInfo=t,n()},function(h,d){s(d)})},s)});return t.serializer=xe,o}function J(e,r,t,i,o,n){e.executeSql(t,i,o,function(s,c){c.code===c.SYNTAX_ERR?s.executeSql("SELECT name FROM sqlite_master WHERE type='table' AND name = ?",[r.storeName],function(h,d){d.rows.length?n(h,c):qe(h,r,function(){h.executeSql(t,i,o,n)},n)},n):n(s,c)},n)}function Mt(e,r){var t=this;e=L(e);var i=new m(function(o,n){t.ready().then(function(){var s=t._dbInfo;s.db.transaction(function(c){J(c,s,"SELECT * FROM "+s.storeName+" WHERE key = ? LIMIT 1",[e],function(h,d){var v=d.rows.length?d.rows.item(0).value:null;v&&(v=s.serializer.deserialize(v)),o(v)},function(h,d){n(d)})})}).catch(n)});return b(i,r),i}function Ft(e,r){var t=this,i=new m(function(o,n){t.ready().then(function(){var s=t._dbInfo;s.db.transaction(function(c){J(c,s,"SELECT * FROM "+s.storeName,[],function(h,d){for(var v=d.rows,y=v.length,S=0;S<y;S++){var T=v.item(S),B=T.value;if(B&&(B=s.serializer.deserialize(B)),B=e(B,T.key,S+1),B!==void 0){o(B);return}}o()},function(h,d){n(d)})})}).catch(n)});return b(i,r),i}function Je(e,r,t,i){var o=this;e=L(e);var n=new m(function(s,c){o.ready().then(function(){r===void 0&&(r=null);var h=r,d=o._dbInfo;d.serializer.serialize(r,function(v,y){y?c(y):d.db.transaction(function(S){J(S,d,"INSERT OR REPLACE INTO "+d.storeName+" (key, value) VALUES (?, ?)",[e,v],function(){s(h)},function(T,B){c(B)})},function(S){if(S.code===S.QUOTA_ERR){if(i>0){s(Je.apply(o,[e,h,t,i-1]));return}c(S)}})})}).catch(c)});return b(n,t),n}function zt(e,r,t){return Je.apply(this,[e,r,t,1])}function Ht(e,r){var t=this;e=L(e);var i=new m(function(o,n){t.ready().then(function(){var s=t._dbInfo;s.db.transaction(function(c){J(c,s,"DELETE FROM "+s.storeName+" WHERE key = ?",[e],function(){o()},function(h,d){n(d)})})}).catch(n)});return b(i,r),i}function kt(e){var r=this,t=new m(function(i,o){r.ready().then(function(){var n=r._dbInfo;n.db.transaction(function(s){J(s,n,"DELETE FROM "+n.storeName,[],function(){i()},function(c,h){o(h)})})}).catch(o)});return b(t,e),t}function Ut(e){var r=this,t=new m(function(i,o){r.ready().then(function(){var n=r._dbInfo;n.db.transaction(function(s){J(s,n,"SELECT COUNT(key) as c FROM "+n.storeName,[],function(c,h){var d=h.rows.item(0).c;i(d)},function(c,h){o(h)})})}).catch(o)});return b(t,e),t}function $t(e,r){var t=this,i=new m(function(o,n){t.ready().then(function(){var s=t._dbInfo;s.db.transaction(function(c){J(c,s,"SELECT key FROM "+s.storeName+" WHERE id = ? LIMIT 1",[e+1],function(h,d){var v=d.rows.length?d.rows.item(0).key:null;o(v)},function(h,d){n(d)})})}).catch(n)});return b(i,r),i}function Yt(e){var r=this,t=new m(function(i,o){r.ready().then(function(){var n=r._dbInfo;n.db.transaction(function(s){J(s,n,"SELECT key FROM "+n.storeName,[],function(c,h){for(var d=[],v=0;v<h.rows.length;v++)d.push(h.rows.item(v).key);i(d)},function(c,h){o(h)})})}).catch(o)});return b(t,e),t}function Wt(e){return new m(function(r,t){e.transaction(function(i){i.executeSql("SELECT name FROM sqlite_master WHERE type='table' AND name <> '__WebKitDatabaseInfoTable__'",[],function(o,n){for(var s=[],c=0;c<n.rows.length;c++)s.push(n.rows.item(c).name);r({db:e,storeNames:s})},function(o,n){t(n)})},function(i){t(i)})})}function Vt(e,r){r=$.apply(this,arguments);var t=this.config();e=typeof e!="function"&&e||{},e.name||(e.name=e.name||t.name,e.storeName=e.storeName||t.storeName);var i=this,o;return e.name?o=new m(function(n){var s;e.name===t.name?s=i._dbInfo.db:s=openDatabase(e.name,"","",0),e.storeName?n({db:s,storeNames:[e.storeName]}):n(Wt(s))}).then(function(n){return new m(function(s,c){n.db.transaction(function(h){function d(T){return new m(function(B,F){h.executeSql("DROP TABLE IF EXISTS "+T,[],function(){B()},function(M,G){F(G)})})}for(var v=[],y=0,S=n.storeNames.length;y<S;y++)v.push(d(n.storeNames[y]));m.all(v).then(function(){s()}).catch(function(T){c(T)})},function(h){c(h)})})}):o=m.reject("Invalid arguments"),b(o,r),o}var Gt={_driver:"webSQLStorage",_initStorage:Pt,_support:Nt(),iterate:Ft,getItem:Mt,setItem:zt,removeItem:Ht,clear:kt,length:Ut,key:$t,keys:Yt,dropInstance:Vt};function jt(){try{return typeof localStorage<"u"&&"setItem"in localStorage&&!!localStorage.setItem}catch{return!1}}function Ze(e,r){var t=e.name+"/";return e.storeName!==r.storeName&&(t+=e.storeName+"/"),t}function Kt(){var e="_localforage_support_test";try{return localStorage.setItem(e,!0),localStorage.removeItem(e),!1}catch{return!0}}function Qt(){return!Kt()||localStorage.length>0}function Xt(e){var r=this,t={};if(e)for(var i in e)t[i]=e[i];return t.keyPrefix=Ze(e,r._defaultConfig),Qt()?(r._dbInfo=t,t.serializer=xe,m.resolve()):m.reject()}function qt(e){var r=this,t=r.ready().then(function(){for(var i=r._dbInfo.keyPrefix,o=localStorage.length-1;o>=0;o--){var n=localStorage.key(o);n.indexOf(i)===0&&localStorage.removeItem(n)}});return b(t,e),t}function Jt(e,r){var t=this;e=L(e);var i=t.ready().then(function(){var o=t._dbInfo,n=localStorage.getItem(o.keyPrefix+e);return n&&(n=o.serializer.deserialize(n)),n});return b(i,r),i}function Zt(e,r){var t=this,i=t.ready().then(function(){for(var o=t._dbInfo,n=o.keyPrefix,s=n.length,c=localStorage.length,h=1,d=0;d<c;d++){var v=localStorage.key(d);if(v.indexOf(n)===0){var y=localStorage.getItem(v);if(y&&(y=o.serializer.deserialize(y)),y=e(y,v.substring(s),h++),y!==void 0)return y}}});return b(i,r),i}function er(e,r){var t=this,i=t.ready().then(function(){var o=t._dbInfo,n;try{n=localStorage.key(e)}catch{n=null}return n&&(n=n.substring(o.keyPrefix.length)),n});return b(i,r),i}function tr(e){var r=this,t=r.ready().then(function(){for(var i=r._dbInfo,o=localStorage.length,n=[],s=0;s<o;s++){var c=localStorage.key(s);c.indexOf(i.keyPrefix)===0&&n.push(c.substring(i.keyPrefix.length))}return n});return b(t,e),t}function rr(e){var r=this,t=r.keys().then(function(i){return i.length});return b(t,e),t}function nr(e,r){var t=this;e=L(e);var i=t.ready().then(function(){var o=t._dbInfo;localStorage.removeItem(o.keyPrefix+e)});return b(i,r),i}function ir(e,r,t){var i=this;e=L(e);var o=i.ready().then(function(){r===void 0&&(r=null);var n=r;return new m(function(s,c){var h=i._dbInfo;h.serializer.serialize(r,function(d,v){if(v)c(v);else try{localStorage.setItem(h.keyPrefix+e,d),s(n)}catch(y){(y.name==="QuotaExceededError"||y.name==="NS_ERROR_DOM_QUOTA_REACHED")&&c(y),c(y)}})})});return b(o,t),o}function or(e,r){if(r=$.apply(this,arguments),e=typeof e!="function"&&e||{},!e.name){var t=this.config();e.name=e.name||t.name,e.storeName=e.storeName||t.storeName}var i=this,o;return e.name?o=new m(function(n){e.storeName?n(Ze(e,i._defaultConfig)):n(e.name+"/")}).then(function(n){for(var s=localStorage.length-1;s>=0;s--){var c=localStorage.key(s);c.indexOf(n)===0&&localStorage.removeItem(c)}}):o=m.reject("Invalid arguments"),b(o,r),o}var ar={_driver:"localStorageWrapper",_initStorage:Xt,_support:jt(),iterate:Zt,getItem:Jt,setItem:ir,removeItem:nr,clear:qt,length:rr,key:er,keys:tr,dropInstance:or},sr=function(r,t){return r===t||typeof r=="number"&&typeof t=="number"&&isNaN(r)&&isNaN(t)},ur=function(r,t){for(var i=r.length,o=0;o<i;){if(sr(r[o],t))return!0;o++}return!1},et=Array.isArray||function(e){return Object.prototype.toString.call(e)==="[object Array]"},ie={},tt={},re={INDEXEDDB:Tt,WEBSQL:Gt,LOCALSTORAGE:ar},cr=[re.INDEXEDDB._driver,re.WEBSQL._driver,re.LOCALSTORAGE._driver],ce=["dropInstance"],Re=["clear","getItem","iterate","key","keys","length","removeItem","setItem"].concat(ce),fr={description:"",driver:cr.slice(),name:"localforage",size:4980736,storeName:"keyvaluepairs",version:1};function lr(e,r){e[r]=function(){var t=arguments;return e.ready().then(function(){return e[r].apply(e,t)})}}function Ae(){for(var e=1;e<arguments.length;e++){var r=arguments[e];if(r)for(var t in r)r.hasOwnProperty(t)&&(et(r[t])?arguments[0][t]=r[t].slice():arguments[0][t]=r[t])}return arguments[0]}var hr=function(){function e(r){E(this,e);for(var t in re)if(re.hasOwnProperty(t)){var i=re[t],o=i._driver;this[t]=o,ie[o]||this.defineDriver(i)}this._defaultConfig=Ae({},fr),this._config=Ae({},this._defaultConfig,r),this._driverSet=null,this._initDriver=null,this._ready=!1,this._dbInfo=null,this._wrapLibraryMethodsWithReady(),this.setDriver(this._config.driver).catch(function(){})}return e.prototype.config=function(t){if((typeof t>"u"?"undefined":_(t))==="object"){if(this._ready)return new Error("Can't call config() after localforage has been used.");for(var i in t){if(i==="storeName"&&(t[i]=t[i].replace(/\W/g,"_")),i==="version"&&typeof t[i]!="number")return new Error("Database version must be a number.");this._config[i]=t[i]}return"driver"in t&&t.driver?this.setDriver(this._config.driver):!0}else return typeof t=="string"?this._config[t]:this._config},e.prototype.defineDriver=function(t,i,o){var n=new m(function(s,c){try{var h=t._driver,d=new Error("Custom driver not compliant; see https://mozilla.github.io/localForage/#definedriver");if(!t._driver){c(d);return}for(var v=Re.concat("_initStorage"),y=0,S=v.length;y<S;y++){var T=v[y],B=!ur(ce,T);if((B||t[T])&&typeof t[T]!="function"){c(d);return}}var F=function(){for(var oe=function(mr){return function(){var _r=new Error("Method "+mr+" is not implemented by the current driver"),rt=m.reject(_r);return b(rt,arguments[arguments.length-1]),rt}},De=0,vr=ce.length;De<vr;De++){var Ce=ce[De];t[Ce]||(t[Ce]=oe(Ce))}};F();var M=function(oe){ie[h]&&console.info("Redefining LocalForage driver: "+h),ie[h]=t,tt[h]=oe,s()};"_support"in t?t._support&&typeof t._support=="function"?t._support().then(M,c):M(!!t._support):M(!0)}catch(G){c(G)}});return R(n,i,o),n},e.prototype.driver=function(){return this._driver||null},e.prototype.getDriver=function(t,i,o){var n=ie[t]?m.resolve(ie[t]):m.reject(new Error("Driver not found."));return R(n,i,o),n},e.prototype.getSerializer=function(t){var i=m.resolve(xe);return R(i,t),i},e.prototype.ready=function(t){var i=this,o=i._driverSet.then(function(){return i._ready===null&&(i._ready=i._initDriver()),i._ready});return R(o,t,t),o},e.prototype.setDriver=function(t,i,o){var n=this;et(t)||(t=[t]);var s=this._getSupportedDrivers(t);function c(){n._config.driver=n.driver()}function h(y){return n._extend(y),c(),n._ready=n._initStorage(n._config),n._ready}function d(y){return function(){var S=0;function T(){for(;S<y.length;){var B=y[S];return S++,n._dbInfo=null,n._ready=null,n.getDriver(B).then(h).catch(T)}c();var F=new Error("No available storage method found.");return n._driverSet=m.reject(F),n._driverSet}return T()}}var v=this._driverSet!==null?this._driverSet.catch(function(){return m.resolve()}):m.resolve();return this._driverSet=v.then(function(){var y=s[0];return n._dbInfo=null,n._ready=null,n.getDriver(y).then(function(S){n._driver=S._driver,c(),n._wrapLibraryMethodsWithReady(),n._initDriver=d(s)})}).catch(function(){c();var y=new Error("No available storage method found.");return n._driverSet=m.reject(y),n._driverSet}),R(this._driverSet,i,o),this._driverSet},e.prototype.supports=function(t){return!!tt[t]},e.prototype._extend=function(t){Ae(this,t)},e.prototype._getSupportedDrivers=function(t){for(var i=[],o=0,n=t.length;o<n;o++){var s=t[o];this.supports(s)&&i.push(s)}return i},e.prototype._wrapLibraryMethodsWithReady=function(){for(var t=0,i=Re.length;t<i;t++)lr(this,Re[t])},e.prototype.createInstance=function(t){return new e(t)},e}(),dr=new hr;u.exports=dr},{3:3}]},{},[4])(4)})})(mt);const de=mt.exports,br="fillp-tool",wr="1.6.5",Er="Helper for creating PICO-8 fillp patterns",Sr="Sean S. LeBlanc <sean.s.leblanc@gmail.com>",Ir="MIT",xr="github:seleb/fillp-tool",Rr={start:"vite dev --port 80",build:"npm run build:cleanup && npm run build:vite && npm run build:sw","build:cleanup":"rm -rf docs","build:vite":"vite build","build:sw":"workbox generateSW",postversion:"npm run build"},Ar={"draw-1-bit":"^1.1.1",localforage:"^1.10.0",preact:"^10.7.1","reset-css":"^5.0.1"},Dr={"@preact/preset-vite":"^2.2.0","rollup-plugin-visualizer":"^5.6.0",typescript:"^4.2.4",vite:"^3.1.7","workbox-cli":"^6.1.5"},Cr={plugins:["@semantic-release/commit-analyzer","@semantic-release/release-notes-generator","@semantic-release/changelog","@semantic-release/npm","@semantic-release/github",["@semantic-release/git",{assets:["docs/**/*","README.md","CHANGELOG.md","package.json","package-lock.json"]}]]},Tr={private:!0,name:br,version:wr,description:Er,author:Sr,license:Ir,repository:xr,scripts:Rr,dependencies:Ar,devDependencies:Dr,release:Cr};const pe=["#000000","#1d2b53","#7e2553","#008751","#ab5236","#5f574f","#c2c3c7","#fff1e8","#ff004d","#ffa300","#ffec27","#00e436","#29adff","#83769c","#ff77a8","#ffccaa"];function Nr({checked:l=!1,colour:f,onClick:a,group:u}){return A("input",{title:`${u}: ${f}`,type:"radio",name:u,onClick:a,checked:l,style:{background:pe[f]}})}function nt({onClick:l,selected:f,group:a}){return A("div",{class:"colour-picker"},pe.map((u,g)=>A(Nr,{checked:f==g,group:a,key:u,colour:g,onClick:()=>l(g)})))}var ge,U,Te,it,Be=0,_t=[],me=[],ot=z.__b,at=z.__r,st=z.diffed,ut=z.__c,ct=z.unmount;function Oe(l,f){z.__h&&z.__h(U,l,Be||f),Be=0;var a=U.__H||(U.__H={__:[],__h:[]});return l>=a.__.length&&a.__.push({__V:me}),a.__[l]}function Br(l,f){var a=Oe(ge++,3);!z.__s&&Pe(a.__H,f)&&(a.__=l,a.i=f,U.__H.__h.push(a))}function ae(l,f){var a=Oe(ge++,4);!z.__s&&Pe(a.__H,f)&&(a.__=l,a.i=f,U.__h.push(a))}function ft(l){return Be=5,pt(function(){return{current:l}},[])}function pt(l,f){var a=Oe(ge++,7);return Pe(a.__H,f)?(a.__V=l(),a.i=f,a.__h=l,a.__V):a.__}function Lr(){for(var l;l=_t.shift();)if(l.__P&&l.__H)try{l.__H.__h.forEach(_e),l.__H.__h.forEach(Le),l.__H.__h=[]}catch(f){l.__H.__h=[],z.__e(f,l.__v)}}z.__b=function(l){typeof l.type!="function"||l.__m||l.type===dt?l.__m||(l.__m=l.__&&l.__.__m?l.__.__m:""):l.__m=(l.__&&l.__.__m?l.__.__m:"")+(l.__&&l.__.__k?l.__.__k.indexOf(l):0),U=null,ot&&ot(l)},z.__r=function(l){at&&at(l),ge=0;var f=(U=l.__c).__H;f&&(Te===U?(f.__h=[],U.__h=[],f.__.forEach(function(a){a.__N&&(a.__=a.__N),a.__V=me,a.__N=a.i=void 0})):(f.__h.forEach(_e),f.__h.forEach(Le),f.__h=[])),Te=U},z.diffed=function(l){st&&st(l);var f=l.__c;f&&f.__H&&(f.__H.__h.length&&(_t.push(f)!==1&&it===z.requestAnimationFrame||((it=z.requestAnimationFrame)||Or)(Lr)),f.__H.__.forEach(function(a){a.i&&(a.__H=a.i),a.__V!==me&&(a.__=a.__V),a.i=void 0,a.__V=me})),Te=U=null},z.__c=function(l,f){f.some(function(a){try{a.__h.forEach(_e),a.__h=a.__h.filter(function(u){return!u.__||Le(u)})}catch(u){f.some(function(g){g.__h&&(g.__h=[])}),f=[],z.__e(u,a.__v)}}),ut&&ut(l,f)},z.unmount=function(l){ct&&ct(l);var f,a=l.__c;a&&a.__H&&(a.__H.__.forEach(function(u){try{_e(u)}catch(g){f=g}}),a.__H=void 0,f&&z.__e(f,a.__v))};var lt=typeof requestAnimationFrame=="function";function Or(l){var f,a=function(){clearTimeout(u),lt&&cancelAnimationFrame(f),setTimeout(l)},u=setTimeout(a,100);lt&&(f=requestAnimationFrame(a))}function _e(l){var f=U,a=l.__c;typeof a=="function"&&(l.__c=void 0,a()),U=f}function Le(l){var f=U;l.__c=l.__(),U=f}function Pe(l,f){return!l||l.length!==f.length||f.some(function(a,u){return a!==l[u]})}var Pr=function(l,f,a,u,g){if(!g){var _=[];g=function($,P){_.push({x:$,y:P})}}var E=a-l,w=u-f,N=Math.abs(E),I=Math.abs(w),D=0,m=E>0?1:-1,b=w>0?1:-1;if(N>I)for(var R=l,L=f;m<0?R>=a:R<=a;R+=m)g(R,L),D+=I,D<<1>=N&&(L+=b,D-=N);else for(var R=l,L=f;b<0?L>=u:L<=u;L+=b)g(R,L),D+=N,D<<1>=I&&(R+=m,D-=I);return _};function j(l,f){return[l,f].join(",")}class Mr{constructor({width:f,height:a,gridSize:u=1,gridLimit:g=16,colorBg:_="#000",colorFill:E="#FFF",colorGrid:w="#333",colorHover:N="#333",filled:I={},locked:D={}}){this.x=-1,this.y=-1,this.px=-1,this.py=-1,this.hovered=!1,this.onCanvasMove=b=>{this.move(b)},this.onWindowMove=b=>{this.move(b)},this.onDown=b=>{if(b.button!==0||this.locked[j(this.x,this.y)])return;this.canvas.removeEventListener("mousemove",this.onCanvasMove),this.canvas.removeEventListener("mouseout",this.onMouseOut),window.addEventListener("mousemove",this.onWindowMove),window.addEventListener("mouseup",this.onUp);const R=!this.filled[j(this.x,this.y)];this.filling=R,this.canvas.dispatchEvent(new CustomEvent("drawstart",{detail:{x:this.x,y:this.y}})),this.move(b)},this.onMouseOut=()=>{this.hovered=!1,this.render()},this.onUp=()=>{this.filling=void 0,window.removeEventListener("mousemove",this.onWindowMove),window.removeEventListener("mouseup",this.onUp),this.canvas.addEventListener("mousemove",this.onCanvasMove),this.canvas.addEventListener("mouseout",this.onMouseOut),this.canvas.dispatchEvent(new CustomEvent("drawend",{detail:{x:this.x,y:this.y}}))},this.canvas=document.createElement("canvas"),this.canvas.style.imageRendering="pixelated",this.canvas.addEventListener("mousemove",this.onCanvasMove),this.canvas.addEventListener("mousedown",this.onDown),this.canvas.addEventListener("mouseout",this.onMouseOut);try{new ResizeObserver(()=>{this.resizeCanvas()}).observe(this.canvas)}catch{console.warn("ResizeObserver not supported: draw-1-bit will not automatically render on resize")}const m=this.canvas.getContext("2d");if(!m)throw new Error("Couldn't create 2D canvas context");this.context=m,this.context.imageSmoothingEnabled=!1,this.width=f,this.height=a,this.gridSize=u,this.gridLimit=g,this.colorBg=_,this.colorFill=E,this.colorGrid=w,this.colorHover=N,this.filled=I,this.locked=D,this.render()}resizeCanvas(){const f=this.canvas.clientWidth,a=this.canvas.clientHeight;this.canvas.width=f*window.devicePixelRatio,this.canvas.height=a*window.devicePixelRatio,this.render()}getPos(f){const a=this.canvas.getBoundingClientRect(),u=this.canvas.width/this.width,g=this.canvas.height/this.height,_=Math.min(u,g);let E=(f.clientX-a.left)/a.width,w=(f.clientY-a.top)/a.height;return E-=.5,w-=.5,E*=u/_,w*=g/_,E+=.5,w+=.5,E*=this.width,w*=this.height,E=Math.floor(E),w=Math.floor(w),[E,w]}move(f){const[a,u]=this.getPos(f);this.x=a,this.y=u;const g=this.hovered;if(this.hovered=a>=0&&u>=0&&a<this.width&&u<this.height,a===this.px&&u===this.py&&this.filling===this.pfilling){g!==this.hovered&&this.render();return}this.filling!==void 0&&Pr(a,u,this.px,this.py,(_,E)=>{_>=0&&E>=0&&_<this.width&&E<this.height&&!this.locked[j(_,E)]&&this.filled[j(_,E)]!==this.filling&&(this.filled[j(_,E)]=this.filling,this.canvas.dispatchEvent(new CustomEvent("draw",{detail:{x:_,y:E,value:this.filling}})))}),this.px=a,this.py=u,this.pfilling=this.filling,this.render()}render(){this.context.save(),this.context.clearRect(0,0,this.canvas.width,this.canvas.height);const f=this.canvas.width/this.width,a=this.canvas.height/this.height,u=Math.min(f,a);this.context.translate((this.canvas.width-this.width*u)/2,(this.canvas.height-this.height*u)/2),this.context.fillStyle=this.colorBg,this.context.fillRect(0,0,this.width*u,this.height*u),this.context.fillStyle=this.colorFill;for(let g=0;g<this.height;++g)for(let _=0;_<this.width;++_)this.locked[j(_,g)]?(this.context.globalAlpha=.5,this.context.fillRect(Math.floor(_*u),Math.floor(g*u),Math.ceil(1*u),Math.ceil(1*u)),this.context.globalAlpha=1):this.filled[j(_,g)]&&this.context.fillRect(Math.floor(_*u),Math.floor(g*u),Math.ceil(1*u),Math.ceil(1*u));if(this.context.globalCompositeOperation="difference",this.hovered&&this.x>=0&&this.y>=0&&this.x<this.width&&this.y<this.height&&!this.locked[j(this.x,this.y)]&&(this.context.fillStyle=this.colorHover,this.context.fillRect(this.x*u,this.y*u,1*u,1*u)),this.context.fillStyle=this.colorGrid,u>this.gridLimit){for(let g=0;g<this.height;++g)this.context.fillRect(this.gridSize,Math.floor(g*u),this.width*u-this.gridSize*2,this.gridSize);for(let g=0;g<this.width;++g)this.context.fillRect(Math.floor(g*u),this.gridSize,this.gridSize,this.height*u-this.gridSize*2)}this.context.fillRect(0,0,this.gridSize,this.gridSize),this.context.fillRect(this.width*u-this.gridSize,0,this.gridSize,this.height*u),this.context.fillRect(0,this.height*u-this.gridSize,this.width*u-this.gridSize,this.gridSize),this.context.restore()}resize(f,a){this.width===f&&this.height===a||(this.width=f,this.height=a,this.resizeCanvas())}lock(f,a,u){if(u===void 0)return this.locked[j(f,a)];this.locked[j(f,a)]=u}fill(f,a,u){if(u===void 0)return this.filled[j(f,a)];this.filled[j(f,a)]=u}addEventListener(...[f,a]){this.canvas.addEventListener(f,a)}removeEventListener(...[f,a]){this.canvas.removeEventListener(f,a)}}const ee=4,ve=4;function ht({bits:l={},tileX:f=1,tileY:a=1,onChange:u,colours:g}){const _=ft(),E=ft(),[w,N]=pt(()=>[pe[g[0]],pe[g[1]]],[g]);return ae(()=>{_.current=new Mr({width:ee*f,height:ve*a,colorBg:w,colorFill:N})},[]),ae(()=>{const I=E.current;!I||I.appendChild(_.current.canvas)},[]),ae(()=>{_.current.colorBg=w,_.current.render()},[w]),ae(()=>{_.current.colorFill=N,_.current.render()},[N]),Br(()=>{function I(D){u(2**(ee*ve-1-(D.detail.x%ee+D.detail.y%ve*ee)))}return _.current.addEventListener("draw",I),()=>{_.current.removeEventListener("draw",I)}},[u]),ae(()=>{Object.values(l).forEach((I,D,m)=>{D=m.length-D-1;for(let b=0;b<f;++b)for(let R=0;R<a;++R)_.current.fill(D%ee+b*ee,Math.floor(D/ee)+R*ve,I)}),_.current.render()},[l]),A("div",{ref:E,class:"grid"})}function Ne({url:l="",children:f}){return A("a",{class:"link",href:l},f)}class Fr extends vt{constructor(){super();fe(this,"copy",a=>{const u=a.currentTarget;u.select(),document.execCommand("copy"),u.blur(),clearTimeout(this.copyNotifTimeout),this.copyNotifTimeout=setTimeout(()=>{this.setState({copy:void 0})},1e3),this.setState({copy:`${u.name} copied!`})});this.state={copy:void 0}}render({bits:a={},colours:[u,g]=[0,7]},{copy:_=""}){const E=Object.entries(a).filter(([I,D])=>D).map(([I])=>I),w=E.reduce((I,D)=>I+parseInt(D,10),0),N=u+(g<<4);return A("div",{class:"output"},A("label",{htmlFor:"Hex"},"Hex Sum: "),A("input",{readonly:!0,id:"Hex",name:"Hex",onClick:this.copy,value:`0x${w.toString(16)}`}),A("label",{htmlFor:"Binary"},"Binary Sum: "),A("input",{readonly:!0,id:"Binary",name:"Binary",onClick:this.copy,value:`0b${w.toString(2)}`}),A("label",{htmlFor:"DecimalSum"},"Decimal Sum: "),A("input",{readonly:!0,id:"DecimalSum",name:"DecimalSum",onClick:this.copy,value:w<32768?w.toString(10):"N/A over 32768"}),A("label",{htmlFor:"Decimal"},"Decimal Addition: "),A("input",{readonly:!0,id:"Decimal",name:"Decimal",onClick:this.copy,value:E.join("+")||0}),A("label",{htmlFor:"color"},"Color: "),A("input",{readonly:!0,id:"color",name:"Color",onClick:this.copy,value:N}),A("div",{class:"copy-notif"},_))}}class zr extends vt{constructor(){super();fe(this,"componentDidMount",()=>{Promise.all([de.getItem("bits"),de.getItem("colours")]).then(([a,u])=>{this.setState(g=>{const _={...g};return _.bits={..._.bits,...a},u&&(u.length>0&&(_.colours[0]=u[0]),u.length>1&&(_.colours[1]=u[1])),_})})});fe(this,"onGridChange",a=>{this.setState(u=>({bits:{...u.bits,[a]:!u.bits[a]}}),()=>{de.setItem("bits",this.state.bits).catch(u=>{console.error(u)})})});this.state={bits:{},colours:[6,0]};for(var a=0;a<16;++a)this.state.bits[Math.pow(2,a)]=!0}setColour(a,u){this.setState(g=>{const _={...g};return[...g.colours],_.colours=[..._.colours],_.colours[a]=u,_},()=>{de.setItem("colours",this.state.colours).catch(g=>{console.error(g)})})}render(a,{bits:u={},colours:g=[0,7]}){const{"0":_,"1":E}=g;return A(dt,null,A("header",null,"fillp tool"),A("main",null,A("div",{className:"grids"},A(ht,{colours:[_,E],bits:u,onChange:this.onGridChange}),A(ht,{tileX:3,tileY:3,colours:[_,E],bits:u,onChange:this.onGridChange})),A(nt,{group:"background",selected:_,onClick:w=>this.setColour(0,w)}),A(nt,{group:"fill",selected:E,onClick:w=>this.setColour(1,w)}),A("hr",null),A(Fr,{bits:u,colours:g})),A("footer",null,A("span",null,"v",Tr.version),A(Ne,{url:"https://www.lexaloffle.com/pico-8.php"},"pico-8"),A(Ne,{url:"https://www.lexaloffle.com/bbs/?tid=3760"},"font"),A(Ne,{url:"https://twitter.com/SeanSLeBlanc"},"contact")))}}yr(A(zr,null),document.body);
